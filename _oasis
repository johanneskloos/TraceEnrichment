OASISFormat: 0.4
Name:        js-trace-enrichment
Version:     0.1
Synopsis:    Trace enrichment for JavaScript execution traces.
Authors:     Johannes Kloos
License:     MIT
Plugins:     META (0.4), StdFiles (0.4)
AlphaFeatures:  ocamlbuild_more_args
XOCamlbuildExtraArgs: -use-ocamlfind

Library "js-enrichment"
  Path:       .
  BuildTools: ocamlbuild
  Install:    true
  XMETAEnable: true
  XMETADescription: Trace enrichment for JavaScript traces
  BuildDepends: yojson, str, lwt.ppx, lwt
  Modules:    CalculatePointsTo, CalculateVersions, CleanTrace, FormatHelper,
    LocalFacts, Misc, PointsTo, Reference, RichTrace, Streaming, Trace,
    TraceTypes, Types, ExtArray
  
Library "js-enrichment.test"
  Path:       .
  BuildTools: ocamlbuild
  Install:    true
  XMETAEnable: true
  XMETADescription: Trace enrichment for JavaScript traces - test data
  BuildDepends: yojson, str, lwt, kaputt, js-enrichment
  Modules:    TestBaseData

Flag prettyprint
  Description: build the pretty-printers for traces.
  Default:     false

Executable "pptrace"
  Path:         .
  BuildTools:   ocamlbuild
  MainIs:       pptrace.ml
  Install$:     flag(prettyprint)
  BuildDepends: js-enrichment
  CompiledObject: best

Executable "pprichtrace"
  Path:         .
  BuildTools:   ocamlbuild
  MainIs:       pprichtrace.ml
  Install$:     flag(prettyprint)
  BuildDepends: js-enrichment
  CompiledObject: best

Executable "ppcleantrace"
  Path:         .
  BuildTools:   ocamlbuild
  MainIs:       ppcleantrace.ml
  Install$:     flag(prettyprint)
  BuildDepends: js-enrichment
  CompiledObject: best

Executable "unittests"
  Path:       .
  BuildTools: ocamlbuild
  Install:    false
  Build$:     flag(tests)
  MainIs:     unittests.ml
  BuildDepends: kaputt, lwt, yojson, str

Test "unittests"
  Command:    $unittests
  Run:        true

Executable "cleantrace_test"
  Install:    false
  Build$:     flag(tests)
  MainIs:     cleantrace_test.ml
  BuildDepends: js-enrichment
  Path:       .
  BuildTools: ocamlbuild
  CompiledObject: best

Executable "richtrace_test"
  Install:    false
  Build$:     flag(tests)
  MainIs:     richtrace_test.ml
  BuildDepends: js-enrichment
  Path:       .
  BuildTools: ocamlbuild
  CompiledObject: best
